# Experiment 03: Car Game üöó

A 2D lane-based car game written in Python using Pygame ‚Äî **100% AI-generated code**.

![Python](https://img.shields.io/badge/Python-3.13-blue)
![Pygame](https://img.shields.io/badge/Pygame-2.6.1-green)
![AI Generated](https://img.shields.io/badge/AI-Generated-purple)

## About

This game was created as an **experiment in AI-assisted software development**. The entire codebase was generated by a **local LLM running on consumer hardware**. Graphics can use external assets (`car.png`, `obstacle.png`) or fall back to procedurally generated sprites. The player controls a car that moves forward continuously while avoiding obstacles.

### Features

- üéÆ Classic lane-switching gameplay mechanics
- üõ£Ô∏è Three-lane road system with animated lane dividers
- üöó External or procedurally generated car sprite
- üöß External or procedurally generated traffic cone obstacles
- üîä Optional sound effects (collision and background music)
- üìä Real-time score tracking
- üí• Collision detection with game over state
- üîÑ Restart functionality
- üì∑ Camera system that follows the car

---

## Architecture

This experiment uses a **two-machine setup**:

| Machine | Role | What runs there |
| ------- | ---- | --------------- |
| **Mac Mini Pro** | LLM Server | LM Studio with Qwen3-Coder model |
| **Windows PC** | Development | Python environment to run the generated game |

> **Note**: You can run everything on a single machine if it has enough RAM (32GB+ recommended for the 30B model).

---

## AI Generation Details

### Hardware

- **Mac Mini Pro** with **64GB** of unified memory

### Software

- [LM Studio](https://lmstudio.ai/) v0.3.36
- Model: [Qwen3-Coder-30B-A3B-Instruct-MLX-8bit](https://huggingface.co/lmstudio-community/Qwen3-Coder-30B-A3B-Instruct-MLX-8bit) (MLX optimized for Apple Silicon)

### Prompt

This was the prompt used to generate the game:

> Create a simple 2D car game using Python where the player's car moves from the bottom of the screen upwards and the camera continuously follows. If the car collides with any obstacles, the game is over. Use the provided 'car.png' for the player's car and 'obstacle.png' for the obstacles.
>
> **Steps:**
> 1. Set up a Python environment with the necessary libraries, including a library for handling graphics such as Pygame.
> 2. Load the 'car.png' and 'obstacle.png' images into your game.
> 3. Design the game window and initialize the player's car at the bottom center of the screen.
> 4. Implement controls to move the car upward continuously, and allow it to switch lanes or move side to side.
> 5. Create a scrolling background or moving obstacles to give the illusion that the car is moving forward.
> 6. Detect collisions between the player's car and obstacles. If a collision is detected, trigger a game-over state.
> 7. Continuously move the camera in sync with the car to maintain the player's car as the focus of the screen.
> 8. Implement a main game loop that updates the screen, handles events, and checks for collisions.

---

## Implementation

The Python script implements a complete 2D car game with the following features:

- **Setup**: Uses Pygame for graphics and sound.
- **Hybrid Graphics**: Loads external images (`car.png`, `obstacle.png`) if available, otherwise generates sprites procedurally.
- **Sound Support**: Optional collision sound effect and background music (`collision.wav`, `background_music.wav`).
- **Car Movement**: The player's car is centered vertically and can move left/right between lanes using arrow keys.
- **Camera System**: The camera follows the car by offsetting all other elements, creating the illusion of forward motion.
- **Obstacles**: Randomly generated obstacles appear from the top and move downward.
- **Scoring**: Score increases as the car progresses.
- **Collision Detection**: Uses Pygame's built-in collision detection to trigger game over.
- **Game Over**: Displays a "GAME OVER" message and allows restarting with 'R' key.
- **Visual Effects**: Includes a simple road with lane dividers that scroll to enhance the forward motion illusion.

The game runs at 60 FPS for smooth performance and includes proper resource management.

---

## Installation & Running

### Prerequisites

**Install Python** (3.11+ recommended):

```bash
# Option 1: Download from python.org
# Go to https://www.python.org/downloads/windows/
# Download Python 3.13 or later
# Run the installer (check "Add Python to PATH")

# Option 2: Using winget
winget install Python.Python.3.13
```

**Verify Python installation**:

```powershell
python --version
# Should show Python 3.13.x or similar
```

---

### Setup

1. **Clone the repository**:

   ```bash
   git clone https://github.com/LuisPalacios/rara-avis
   cd rara-avis/experiments/03-car-game
   ```

2. **Create a virtual environment**:

   ```powershell
   # PowerShell
   python -m venv .venv
   ..\..\.venv\Scripts\Activate.ps1
   ```

   ```bash
   # Git Bash
   python -m venv .venv
   source ../../.venv/Scripts/activate
   ```

3. **Install dependencies**:

   ```bash
   pip install pygame
   ```

4. **Optional assets** (the game works without them):

   - `car.png` ‚Äî Custom car sprite (will be scaled to 50x80 pixels)
   - `obstacle.png` ‚Äî Custom obstacle sprite (will be scaled to 40x60 pixels)
   - `collision.wav` ‚Äî Sound effect for collisions
   - `background_music.wav` ‚Äî Background music (loops continuously)

---

### Run the Game

```bash
python car-game.py
```

### Controls

| Action | Input |
| ------ | ----- |
| Move Left | `‚Üê` Left Arrow |
| Move Right | `‚Üí` Right Arrow |
| Restart (after game over) | `R` |

---

## Reproducing This Experiment

If you want to generate the game yourself:

1. **On your Mac**: Open LM Studio Chat with Qwen3-Coder loaded
2. **Copy the prompt** from the [Prompt section](#prompt) above
3. **Paste it into LM Studio** and press Enter
4. **Wait for generation** (~2,500 tokens)
5. **Copy the generated code** to a file called `car-game.py`
6. **On your Windows PC**: Create the virtual environment and run the game
7. **Iterate**: If there are bugs, describe them to the LLM and ask for fixes (e.g., ask it to generate graphics procedurally instead of using external assets)

---

## Notes

- Ensure to optimize the code for smooth graphics performance.
- Consider adding additional features like:
  - Sound effects for collisions and scoring
  - Multiple obstacle types
  - Increasing difficulty over time
  - High score persistence
  - Power-ups

---

## Lessons Learned

1. **Local LLMs handle game logic well**: The 30B model generated functional collision detection and camera systems
2. **Procedural graphics are sufficient**: No external assets needed ‚Äî Pygame primitives create recognizable sprites
3. **Lane-based movement is intuitive**: The three-lane system provides clear gameplay constraints
4. **Iterative prompting works**: Initial output can be refined with follow-up prompts
